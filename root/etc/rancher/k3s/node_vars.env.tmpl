# Node configuration variables for {{ .hostname }}
# Generated by chezmoi from nodes configuration

# Node identification
HOSTNAME="{{ .hostname }}"
NODE_IP="{{ .ip }}"
NODE_TYPE="{{ .node_type }}"

# Node role flags
IS_SERVER={{ if eq .node_type "server" }}true{{ else }}false{{ end }}
IS_AGENT={{ if eq .node_type "agent" }}true{{ else }}false{{ end }}
IS_BOOTSTRAP={{ if .bootstrap }}true{{ else }}false{{ end }}

{{- if eq .node_type "server" }}
# Server-specific configuration
ROUTER_ID="{{ .router_id }}"
PRIORITY="{{ .priority }}"
KEEPALIVED_STATE="{{ .keepalived_state }}"
{{- end }}

# Network configuration
VIRTUAL_IP="{{ .network.virtual_ip }}"
GATEWAY="{{ .network.gateway }}"
DNS="{{ .network.dns }}"
SUBNET_MASK="{{ .network.subnet_mask }}"

# K3s configuration
K3S_VERSION="{{ .k3s.version }}"
CLUSTER_CIDR="{{ .k3s.cluster_cidr }}"
SERVICE_CIDR="{{ .k3s.service_cidr }}"
CLUSTER_DNS="{{ .k3s.cluster_dns }}"
CLUSTER_NAME="{{ .cluster_name }}"

# HA configuration
{{- if eq .node_type "server" }}
HA_ENABLED=true
HA_VIRTUAL_IP="{{ .network.virtual_ip }}"
HA_INTERFACE="eth0"
HA_ROUTER_ID="{{ .router_id }}"
{{- else }}
HA_ENABLED=false
{{- end }}